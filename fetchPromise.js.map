{"version":3,"sources":["src/fetchPromise.es6"],"names":["items","createBatchEntry","j","batch","map","item","i","promiseRestPost","type","body","response","extractContent","singleRestBatch","entries","optionsArgument","defaultOptions","maxEntries","options","maxEntriesPerBatch","length","batchObjectToArray","singleOsapiBatch","entryArrays","Math","ceil","results","concat","promiseBatch","promiseRestBatch","promiseOsapiBatch","promiseOsapiRequest","promiseHttpGet","promiseHttpPost","promiseRestGet","promiseRestDelete","promiseRestPut","jive","window","osapi","content","id","undefined","Array","list","osapiRequestFunc","resolve","reject","request","corev3","execute","error","args","http","get","post","href","includes","split","core","v","promiseRestRequest","console","warn","delete","put","newBatch","forEach","entry","executable","add","batchResponse","returnObject","key","status","data","CurrentPlace","filter","_filter","place","rawPlace","placeID","uri","resources","self","ref","html","name","tile","getContainer","fetchPromise","promiseOsapiPollingRequest"],"mappings":"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","file":"fetchPromise.js","sourcesContent":["/**\n * Created by M. Yegorov on 2016-12-27.\n */\n\nimport 'core-js/fn/object/keys'\nimport 'core-js/fn/array/concat'\nimport 'core-js/fn/array/map'\nimport 'core-js/fn/array/for-each'\nimport 'core-js/fn/string/includes'\n\nconst jive = window.jive\nconst osapi = window.osapi\n\nimport {promiseOsapiPollingRequest} from './deprecated'\nimport {unescapeHtmlEntities, pause, splitArray} from './utils'\n\nexport function extractContent(response) {\n\n    if (!response.content) return response\n\n    if (response.content.id !== undefined) return response.content\n    if (response.content instanceof Array) return response.content\n    if (response.content.list) return response.content\n\n    return response\n}\n\nexport function promiseOsapiRequest(osapiRequestFunc){\n    return new Promise((resolve, reject) => {\n\n        const request = (typeof osapiRequestFunc === 'function') ? osapiRequestFunc(osapi.jive.corev3) : osapiRequestFunc;\n\n        request.execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\n\nexport function promiseHttpGet(...args){\n    return new Promise ((resolve, reject) => {\n\n        osapi.http.get(...args).execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\nexport function promiseHttpPost(...args){\n    return new Promise ((resolve, reject) => {\n\n        osapi.http.post(...args).execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\nexport function promiseRestGet(href) {\n\n    if (href.includes(\"/api/core/v3/\")) {\n        href = href.split(\"/api/core/v3\")[1]\n    }\n\n    return new Promise((resolve, reject) => {\n        osapi.jive.core.get({\n            v:'v3',\n            href\n        }).execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\nexport const promiseRestRequest = function(href){\n    console.warn('Use of promiseRestRequest is deprecated, use promiseRestGet instead')\n    return promiseRestGet(href)\n}\n\n/**\n *\n * @param href\n * @param options - body, type, etc\n * @returns {Promise<any>}\n */\nexport function promiseRestPost(href, options = {}) {\n\n    if (href.includes(\"/api/core/v3/\")) {\n        href = href.split(\"/api/core/v3\")[1]\n    }\n\n    return new Promise((resolve, reject) => {\n        osapi.jive.core.post({\n            v:'v3',\n            href,\n            ...options\n        }).execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\nexport function promiseRestDelete(href) {\n\n    if (href.includes(\"/api/core/v3/\")) {\n        href = href.split(\"/api/core/v3\")[1]\n    }\n\n    return new Promise((resolve, reject) => {\n        osapi.jive.core.delete({\n            v:'v3',\n            href\n        }).execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\nexport function promiseRestPut(href) {\n\n    if (href.includes(\"/api/core/v3/\")) {\n        href = href.split(\"/api/core/v3\")[1]\n    }\n\n    return new Promise((resolve, reject) => {\n        osapi.jive.core.put({\n            v:'v3',\n            href\n        }).execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\n\nfunction singleOsapiBatch(entries, createBatchEntry, j = 0) {\n    return new Promise((resolve, reject) => {\n\n        let batch = osapi.newBatch()\n\n        entries.forEach((entry, i) => {\n            const [id, executable] = createBatchEntry(entry, i, j)\n            batch.add(id, executable)\n        })\n\n        batch.execute(response => {\n            if (response.error) reject(response)\n            else resolve(response)\n        })\n    })\n}\n\nfunction batchObjectToArray(batchResponse) {\n    //console.log('batchObjectToArray', batchResponse)\n\n    return Object.keys(batchResponse).map(key => {\n\n        let returnObject = {\n            id: key,\n            status: (typeof batchResponse[key].status === \"number\") ? batchResponse[key].status : 200\n        }\n\n        if (batchResponse[key].error) {\n            returnObject.error = batchResponse[key].error\n        } else {\n            returnObject.data = extractContent(batchResponse[key])\n        }\n\n        return returnObject\n    })\n}\n\nasync function singleRestBatch(items, createBatchEntry, j=0){\n    const batch = items.map((item, i) => createBatchEntry(item, i, j))\n\n    const response = await promiseRestPost('/executeBatch', {\n        type: \"application/json\",\n        body: batch\n    })\n\n    return extractContent(response)\n}\n\n/**\n * promiseOsapiBatch\n *\n * @param entries - any array based on which you want to build a batch\n * @param createBatchEntry - a func that takes a single entry and its index from the array above\n * and returns an object with the fields \"id\" and \"request\". \"id\" should be a unique id of the\n * request and \"request\" should be an OSAPI executable\n * @returns {Promise<Array>}\n */\nasync function promiseBatch(type = 'rest', entries, createBatchEntry, optionsArgument = {}) {\n\n    const defaultOptions = {\n        maxEntries: 25\n    }\n\n    const options = {...defaultOptions, ...optionsArgument}\n\n    //console.time('batch')\n\n    //no more than 25! Jive hard limit\n    const maxEntriesPerBatch = options.maxEntries < 25 ? options.maxEntries : 25\n\n    if (entries.length <= maxEntriesPerBatch) {\n\n        if (type === 'osapi') return batchObjectToArray(await singleOsapiBatch(entries, createBatchEntry))\n        if (type === 'rest') return await singleRestBatch(entries, createBatchEntry)\n\n        //console.timeEnd('batch')\n\n    } else {\n\n        const entryArrays = splitArray(entries, Math.ceil(entries.length / maxEntriesPerBatch))\n        let results = []\n        let response = false\n\n        for (let i = 0; i < entryArrays.length; i++) {\n\n            if (type === 'osapi') {\n                response = await singleOsapiBatch(entryArrays[i], createBatchEntry, i)\n                results = results.concat(batchObjectToArray(response))\n            }\n            if (type === 'rest') {\n                response = await singleRestBatch(entryArrays[i], createBatchEntry, i)\n                results = results.concat(response)\n            }\n\n            // make 1 sec pause after each request an 11 sec pause each 4 requests to bypass jive's\n            // request frequency limitation\n            // but only if this is not the last query\n            if (i < entryArrays.length - 1) {\n                await pause((i + 1) % 4 === 0 ? 11000 : 1000)\n            }\n        }\n\n        //console.timeEnd('batch')\n\n        return results\n    }\n}\n\nexport async function promiseRestBatch(entries, createBatchEntry, options = {}) {\n    return await promiseBatch('rest', entries, createBatchEntry, options)\n}\n\nexport async function promiseOsapiBatch(entries, createBatchEntry, options = {}) {\n    return await promiseBatch('osapi', entries, createBatchEntry, options)\n}\n\nexport class CurrentPlace {\n    place = false\n\n    constructor(filter = this._filter){\n        this.filter = filter\n    }\n\n    _filter(rawPlace){\n        return {\n            id: rawPlace.placeID,\n            uri: rawPlace.resources.self.ref,\n            html: rawPlace.resources.html.ref,\n            name: unescapeHtmlEntities(rawPlace.name),\n            type: 'place'\n        }\n    }\n\n    fetch(){\n        return new Promise(resolve => {\n\n            if (this.place) {\n                resolve(this.place)\n                return null\n            }\n\n            jive.tile.getContainer(place => {\n                this.place = this.filter(place)\n                resolve(this.place)\n            })\n        })\n    }\n}\n\n//export const currentPlace = new CurrentPlace()\n\nconst fetchPromise = {\n    promiseHttpGet,\n    promiseHttpPost,\n    promiseOsapiRequest,\n    promiseRestGet,\n    promiseRestPost,\n    promiseRestPut,\n    promiseRestDelete,\n    promiseRestRequest,\n    promiseOsapiPollingRequest,\n    promiseOsapiBatch,\n    promiseRestBatch,\n    CurrentPlace,\n    extractContent\n    //currentPlace,\n}\n\nexport default fetchPromise"]}